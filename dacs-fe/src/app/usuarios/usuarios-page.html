<div class="usuarios-wrapper">
  <div class="usuarios-card">
    <div class="usuarios-header">
      <h2 class="page-title">{{ title }}</h2>
      <div class="actions">
        <input placeholder="Ingrese un usuario" class="search" (input)="onSearchInput($event)" (keyup.enter)="searchByName()" [value]="searchTerm" />
        <button class="search-btn" (click)="searchByName()">Buscar</button>
        <button *ngIf="searchTerm" class="clear-btn" (click)="clearSearch()">Limpiar</button>
        <a class="new-btn" routerLink="/usuarios/new">Nuevo usuario</a>
      </div>
    </div>

    <p class="hint">GestiÃ³n de usuarios del sistema</p>

    <div *ngIf="loading" class="loading">Cargando usuarios...</div>

    <div *ngIf="!loading && usuarios.length === 0" class="empty">
      <p>No existen usuarios.</p>
    </div>

    <div *ngIf="!loading && usuarios.length > 0" class="list">
      <div *ngFor="let u of displayedUsuarios" class="list-item">
        <div class="avatar">ðŸ‘¤</div>
          <div class="avatar" aria-hidden="true">
            <!-- avatar SVG -->
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="avatar-icon">
              <path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5z" fill="#dbe9f8"/>
              <path d="M4 20c0-2.761 3.582-5 8-5s8 2.239 8 5v1H4v-1z" fill="#e9f2fb"/>
              <path d="M12 12c-3.314 0-6 2.686-6 6v1h12v-1c0-3.314-2.686-6-6-6z" fill="#cfe8fb" opacity="0.6"/>
            </svg>
          </div>
        <div class="info">
          <div class="name">{{ u.nombre }} {{ u.apellido }}</div>
          <div class="phone">{{ u.num_telefono || 'Sin telÃ©fono' }}</div>
          <div class="email">{{ u.correo || 'Sin correo' }}</div>
        </div>
        <div class="controls">
            <button class="btn-small" (click)="goToDetalle(u)" title="Ver detalle" aria-label="Ver detalle">
              <!-- magnify / view SVG -->
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
                <path d="M21 21l-4.35-4.35" stroke="#6b5dd3" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="11" cy="11" r="5" stroke="#6b5dd3" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="btn-small" (click)="goToEdit(u)" title="Editar" aria-label="Editar usuario">
              <!-- pencil / edit SVG -->
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
                <path d="M3 21h4l11-11a2.828 2.828 0 0 0 0-4l-1-1a2.828 2.828 0 0 0-4 0L3 16v5z" stroke="#6b5dd3" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="btn-small delete" (click)="confirmDelete(u)" title="Eliminar" aria-label="Eliminar usuario">
              <!-- trash / delete SVG -->
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
                <path d="M3 6h18" stroke="#f04e4e" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6" stroke="#f04e4e" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 11v6M14 11v6" stroke="#f04e4e" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" stroke="#f04e4e" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
        </div>
      </div>
    </div>

    <div *ngIf="error" class="error">{{ error }}</div>

    <div class="card-footer">
      <a routerLink="/home" class="cancel-btn">Cancelar</a>
    </div>
  </div>
</div>
